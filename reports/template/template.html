<head>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <title>MySQL Benchmark Results</title>
</head>
<body>
<script>
    isTimeMode = '{{mode}}' === 'TIME'
    rows = {{json reports}}
    let zAxisText = isTimeMode ? 'time' : 'transactions';

    let clients = [],
        tps = [],
        transactions = [],
        latency = [],
        time = [],
        ios = [],
        currentMemory = [],
        totalMemory = [],
        performanceLatency = [],
        ops = [],
        tableScans = [];

    for (let i = 0; i < rows.length; i++) {
        let row = rows[i];
        let performanceResult = row["performanceResult"];
        clients.push(row["clients"]);
        tps.push(row["tps"]);
        latency.push(row["latency"]);
        transactions.push(row["transactions"])
        currentMemory.push(performanceResult["currentMemory"]);
        totalMemory.push(performanceResult["totalMemory"]);
        performanceLatency.push(performanceResult["latency"]);
        ios.push(performanceResult["ios"]);
        ops.push(performanceResult["ops"]);
        tableScans.push(performanceResult["tableScans"]);
    }
</script>
<div id="benchmark_results">
    <div id='benchmark_tps'>
        <script>
            Plotly.newPlot('benchmark_tps', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: tps,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>tps: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "TPS graphic",
                        autosize: true,
                        height: 760,
                        width: 1440,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'tps'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {responsive: true}
                }
            );
        </script>
    </div>
    <div id='benchmark_latency'>
        <script>
            Plotly.newPlot('benchmark_latency', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: latency,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>latency: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Latency graphic",
                        autosize: true,
                        height: 760,
                        width: 1440,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'latency in ms'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {responsive: true}
                }
            );
        </script>
    </div>
</div>
<div id="performance_schema_results">
    <div id='performance_schema_ops'>
        <script>
            Plotly.newPlot('performance_schema_ops', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: ops,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>ops: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Database Operations per second graphic by Performance Schema",
                        autosize: true,
                        height: 500,
                        width: 1000,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'operations per second'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {
                        responsive: true,
                        displaylogo: false
                    }
                }
            );
        </script>
    </div>
    <div id='performance_schema_ios'>
        <script>
            Plotly.newPlot('performance_schema_ios', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: ios,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>ios: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Database I/Os graphic by Performance Schema",
                        autosize: true,
                        height: 500,
                        width: 1000,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'ios per second'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {
                        responsive: true,
                        displaylogo: false
                    }
                }
            );
        </script>
    </div>
    <div id='performance_schema_current_memory'>
        <script>
            Plotly.newPlot('performance_schema_current_memory', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: currentMemory,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>current memory: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Database current memory graphic by Performance Schema",
                        autosize: true,
                        height: 500,
                        width: 1000,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'current memory in KiB'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {responsive: true}
                }
            );
        </script>
    </div>
    <div id='performance_schema_total_memory'>
        <script>
            Plotly.newPlot('performance_schema_total_memory', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: totalMemory,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>total memory: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Database total memory graphic by Performance Schema",
                        autosize: true,
                        height: 500,
                        width: 1000,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'total memory in KiB'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {responsive: true}
                }
            );
        </script>
    </div>
    <div id='performance_schema_latency'>
        <script>
            Plotly.newPlot('performance_schema_latency', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: performanceLatency,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>latency: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Database latency graphic by Performance Schema",
                        autosize: true,
                        height: 500,
                        width: 1000,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'latency in ms'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {responsive: true}
                }
            );
        </script>
    </div>
    <div id='performance_schema_no_index_usage'>
        <script>
            Plotly.newPlot('performance_schema_no_index_usage', {
                    data: [
                        {
                            type: "scatter3d",
                            mode: "markers",
                            x: clients,
                            y: tableScans,
                            z: isTimeMode ? time : transactions,
                            marker: {
                                color: 'rgb(23, 190, 207)',
                                size: 2,
                                sizemode: "area"
                            },
                            hoverinfo: "text",
                            hovertemplate:
                                "clients: %{x}" +
                                "<br>table scans: %{y}" +
                                "<br>" + zAxisText + ": %{z}" +
                                "<extra></extra>"
                        }
                    ],
                    layout: {
                        title: "Database table scan usage graphic by Performance Schema",
                        autosize: true,
                        height: 500,
                        width: 1000,
                        scene: {
                            aspectratio: {
                                x: 1,
                                y: 1,
                                z: 1
                            },
                            camera: {
                                center: {
                                    x: 0,
                                    y: 0,
                                    z: 0
                                },
                                eye: {
                                    x: 1.25,
                                    y: 1.25,
                                    z: 1.25
                                },
                                up: {
                                    x: 0,
                                    y: 0,
                                    z: 1
                                }
                            },
                            xaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: "clients"
                            },
                            yaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: 'table scans usage count'
                            },
                            zaxis: {
                                type: 'linear',
                                zeroline: false,
                                title: zAxisText
                            }
                        }
                    },
                    config: {responsive: true}
                }
            );
        </script>
    </div>
</div>
</body>